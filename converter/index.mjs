import{$1,$clamp}from"/util.mjs";import{initialize,assumeFormats,formats,getDecodableFormats,getEncodableFormats}from"./formats.mjs";onclick=async()=>{const e=(await new Promise((e=>{const t=document.createElement("input");t.type="file",t.click(),t.onchange=t=>e(t.target.files)})))[0],t=await new Promise(((t,a)=>{const o=new FileReader;o.onload=e=>t(e.target.result),o.onerror=a,o.readAsArrayBuffer(e)}));await initialize();const a=(await assumeFormats(t,{mimeType:e.type}))[0];await(a.init?.());const o=await a.decode(t,(e=>{console.log(`Decoding: ${100*e}%`)})),i=await formats.wav.encode(o,(e=>{console.log(`Encoding: ${100*e}%`)}),{bitDepth:"int8",numberOfChannels:1,sampleRate:8e3}),n=new Blob([i],{type:formats.wav.mime[0]}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download=`file.${formats.wav.ext[0]}`,r.click(),URL.revokeObjectURL(r.href)};